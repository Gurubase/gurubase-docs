---
title: 'Text-to-Speech Stream V2'
api: 'POST /{guru_type}/text-to-speech-v2/stream/'
description: 'Convert text to speech using ElevenLabs TTS with OpenAI fallback and stream audio response'
---

Convert text to speech using ElevenLabs TTS API with OpenAI fallback and stream the audio response. Code blocks and inline code are automatically processed for better speech generation.

<Note>
This feature requires special activation. Please contact our support team to enable ElevenLabs TTS for your account.
</Note>

<RequestExample>
```bash cURL
curl --request POST \
  --url https://api.gurubase.io/api/v1/gurubase/text-to-speech-v2/stream/ \
  --header 'x-api-key: YOUR_API_KEY' \
  --header 'Content-Type: application/json' \
  --data '{
    "text": "Hello, this is a test message with some code: `console.log(\"hello\")` and a code block:\n```python\ndef hello():\n    print(\"hello\")\n```"
  }'
```

</RequestExample>

## Path Parameters

<ParamField path="guru_type" type="string" required>
  The guru type identifier for the text-to-speech request
</ParamField>

## Headers

<ParamField header="x-api-key" type="string" required>
  Your API key for authentication. You can obtain your API key from the [Gurubase.io](https://gurubase.io/api-keys) dashboard.
</ParamField>

### Body Parameters

<ParamField body="text" type="string" required>
  The text to convert to speech
</ParamField>

### Response

The response is a streaming audio file in MP3 format.

<ResponseField name="audio_stream" type="audio/mpeg">
  Streaming audio response in MP3 format
</ResponseField>

<ResponseExample>
```json 400
{
  "msg": "No text provided"
}
```

```json 401
{
  "error": "Invalid API key"
}
```

```json 403
{
  "msg": "Text-to-speech is not enabled for this guru type"
}
```

```json 429
{
  "error": "Rate limit exceeded"
}
```

```json 500
{
  "msg": "Error generating speech stream"
}
```
</ResponseExample>

## TTS Provider Fallback

This endpoint uses a sophisticated fallback system:

1. **Primary**: ElevenLabs TTS API (if configured and available)
2. **Fallback**: OpenAI TTS API (if ElevenLabs fails or is not configured)

The system automatically handles provider failures and seamlessly switches between providers to ensure reliable audio generation.

## Streaming Response

The endpoint returns a streaming audio response with the following headers:
- `Content-Type: audio/mpeg`
- `Cache-Control: no-cache`
- `X-Accel-Buffering: no` (disables nginx buffering for real-time streaming)
